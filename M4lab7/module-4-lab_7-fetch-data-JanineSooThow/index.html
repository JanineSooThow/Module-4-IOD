
<!-- Lab 7: Fetch Data -->

<!-- Create a web page that will read the posts from JSONPlaceholder. 
Similarly to the previous lab, arrange them on the web page -->

<!-- Make use of the fetch API to retrieve data online and display it. 
    Set the limit default to 10. When the page loads up, it will use the default value -->


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

</head>
<body>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous">
    </script>

    <!-- Your code goes here -->
<div id="myCardsDiv" class="row">
    <!--my cards will go here --></div>
<!-- HTML template below from bootstrap-->
<template id="card-template">
    <div class="card" style="width: 18rem;">
        <div class="card-body">
          <h5 class="card-title">Special title treatment</h5>
          <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
          <a href="#" class="btn btn-primary">Go somewhere</a>
        </div>
      </div>
</template>

    <!-- Fetch link here -->
    <script>

        let data = []

        fetch('https://jsonplaceholder.typicode.com/posts?_limit=10') //fetch generates the cards. Fetch the data and store it in variable 
        .then((response) => response.json())
        .then((json) => {  
        console.log(json);
        data=json
        showCards()  
    });

//first card 
    const showCards = ()=> {
        const parentDiv = document.getElementById('myCardsDiv') //parent element
        //loop through data for each card we have pulled through fetch
        data.forEach((obj)=>{
        const template = document.getElementById("card-template").content.cloneNode(true); //make copy 
    
        template.querySelector('.card-title').innerText = obj.title;
        template.querySelector('.card-text').innerText = obj.body;

        parentDiv.appendChild(template)
    })

}

    </script>
    
</body>
</html>